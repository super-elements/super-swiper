<link rel="import" href="../polymer/polymer.html">
<link rel="stylesheet" href="../swiper/dist/css/swiper.min.css">
<script src="../swiper/dist/js/swiper.min.js"></script>
<!--
`super-swiper`
customized element

@demo demo/index.html
-->


<dom-module id="super-swiper">
  <template>
    <style>
     .swiper-container {
          width: 100%;
          height: 100%;
      }

    </style>
    <!-- <slot> -->
    <div class="swiper-container" id="swiper-container">
        <div class="swiper-wrapper">
           <slot></slot>
        </div>
        <!-- Add Pagination -->
        <slot name="addElement" > </slot>
    </div>

  </template>

  <script>
    Polymer({

      is: 'super-swiper',

      properties: {
        slidesPerView: {
          type: Number,
          value: 1,
          reflectToAttribute: true,
          observer: '_currentState',
        },
        spaceBetween:{
          type: Number,
          value: 3,
          reflectToAttribute: true,
          observer: '_currentState'
        },
        pagination: {
          type: String,
          value: '.page',
          reflectToAttribute: true,
          observer: '_currentState',
        },
        paginationClickable:{
          type: Boolean,
          value: false,
          reflectToAttribute: true,
          observer: '_currentState',
        },
        scrollbar: {
          type: String,
          value: '.bar',
          reflectToAttribute: true,
          observer: '_currentState',
        },
        // prevButton : {
        //   type: String,
        //   value: '.prev',
        //   observer: '_currentState',
        //   reflectToAttribute: true,
        // },
        navButton : {
          type: Boolean,
          value: false,
          reflectToAttribute: true,
          observer: '_currentState',
        }
       },
      _currentState: function()
      {
        var self = this;
        var obj = {
              observer: true,
              observerParents: true
        };
        for (var prop in self.properties)
        {
          obj[prop] = self[prop];
          console.log("prop: ",prop)
          for (var att, i = 0, atts = self.attributes, n = atts.length; i < n; i++)
          {
               att = atts[i];
               console.log("att value",att);
              if(att.nodeName == 'pagination')
              {
                if (self.getElementsByClassName('swiper-pagination').length < 1)
                {
                  var paginationDiv = document.createElement("div");
                  paginationDiv.className = "swiper-pagination";
                  paginationDiv.slot= "addElement";
                  self.$['swiper-container'].appendChild(paginationDiv);
                }
              }
              if(att.nodeName == 'scrollbar')
              {
                if (self.getElementsByClassName('swiper-scrollbar').length < 1)
                {
                  var scrollbarDiv = document.createElement("div");
                  scrollbarDiv.className = "swiper-scrollbar";
                  scrollbarDiv.slot= "addElement";
                  self.$['swiper-container'].appendChild(scrollbarDiv);
                }
              }
              if(att.nodeName == 'nav-button')
              {
                obj.pagination = '.swiper-pagination';
                obj.nextButton = '.swiper-button-next';
                obj.prevButton = '.swiper-button-prev';
                if(self.getElementsByClassName('swiper-button-next').length < 1)
                {
                  var nextButtonDiv = document.createElement("div");                 
                  nextButtonDiv.className = "swiper-button-next";
                  nextButtonDiv.slot= "addElement";
                  self.$['swiper-container'].appendChild(nextButtonDiv);
                
                  var prevButtonDiv = document.createElement("div");
                  prevButtonDiv.className = "swiper-button-prev";
                  prevButtonDiv.slot= "addElement";
                  self.$['swiper-container'].appendChild(prevButtonDiv);
                }
              }

          }
        }
        console.log("object",obj);

        var swiper = new Swiper('.swiper-container', obj)
      },
      ready: function() {


      }


    });
  </script>
</dom-module>
